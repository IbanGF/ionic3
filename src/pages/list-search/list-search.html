<!--
  Generated template for the ListSearchPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header [style.opacity]="isModal ? 0 : 1" no-border>
  <ion-toolbar color="light">
    <ion-searchbar #searchBar [ngModel]="formatted_address" (click)="presentAutocompleteModal()" placeholder="Search for a place"></ion-searchbar>
    <!-- <ion-buttons end>
      <button ion-button icon-only>
        <ion-icon name="options" ></ion-icon>
      </button>
    </ion-buttons> -->
  </ion-toolbar>
  <shrinking-segment-header [scrollArea]="myContent">
    <ion-toolbar color="light">
      <ion-buttons style="padding: 0 8px" left>

        <ion-select [(ngModel)]="selectedSports" multiple="true" #sportSelect hidden=true>
          <ion-option *ngFor="let sport of sports" [value]="sport">{{sport}}</ion-option>
        </ion-select>

        <button ion-button color="dark" round outline (click)="openSportSelect()">Sports</button>
        <button ion-button color="dark" round outline>Dates</button>
        <button ion-button color="dark" round outline>Filtres</button>
      </ion-buttons>
    </ion-toolbar>
  </shrinking-segment-header>
</ion-header>


<ion-content [style.opacity]="isModal ? 0 : 1" fullscreen #myContent parallax-header>
  <div class="header-image">
    <ion-grid>
      <ion-row>
        <ion-col text-center>
          <img width="220" src="https://sportihome.com/assets/icones/sportihome-white.svg" alt="Sportihome logo">
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col text-center>
          <h3>Vivons nos sports plus fort ensemble</h3>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col text-center>
          <h6>La communauté qui vous guide et vous héberge au plus près des spots.</h6>
        </ion-col>
      </ion-row>
    </ion-grid>
  </div>
  <!-- <ion-card *ngFor="let place of currentPlaces">
    <img class="main" [src]="'https://test.sportihome.com/uploads/places/' + place._id + '/thumb/' + place.pictures[0]" />
    <ion-card-content>
      <p>{{place.private}} - {{place.home.travellers}} voyageurs</p>
      <h2>{{place.name}}</h2>
      <h3>{{place.address && place.address.locality}}</h3>
      <h3>À partir de {{place.home.price.defaultPrice|currency:'EUR':'€':0}} par nuit</h3>
      <p>
        <ion-icon name="text"></ion-icon>
        <rating [ngModel]="place.rating.overallRating" readOnly="true"></rating> ({{place.rating.numberOfRatings || 0}} avis)
      </p>
    </ion-card-content> -->
  <div *ngFor="let place of currentPlaces" class="containerCard">
    <card-place [place]="place" [favorite]="isFavoritePlace(place._id)" isVertical="true"></card-place>
  </div>
  <ion-infinite-scroll (ionInfinite)="loadMorePlaces($event)" *ngIf="currentPlaces && currentPlaces.length < totalPlacesCount">
    <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="Chargement..."></ion-infinite-scroll-content>
  </ion-infinite-scroll>
  <ion-fab bottom right>
    <button ion-fab (click)="presentMapModal()"><ion-icon name="map"></ion-icon></button>
  </ion-fab>
  <ion-infinite-scroll (ionInfinite)="loadMorePlaces($event)" threshold="120px" *ngIf="currentPlaces && currentPlaces.length < totalPlacesCount">
    <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="Chargement..."></ion-infinite-scroll-content>
  </ion-infinite-scroll>
</ion-content>
